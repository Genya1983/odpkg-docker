## odpkg-docker: オープンデータカタログサイト パッケージ（docker版）

### 概要
odpkg-dockerは、[CKAN](https://ckan.org/)を使ったオープンデータサイトのためのパッケージソフトウエアです。主に以下の３つの機能を備えています。
- データカタログ機能（CKAN）
- ポータル機能（Wordpress）
- ダッシュボード機能

データカタログ機能は、オープンデータのカタログで広く用いられるCKANを使い、オープンデータの蓄積や提供に必要な機能を提供します。
ポータル機能は[Wordpress](https://ja.wordpress.org/)を使い、オープンデータ利用に関わる情報提供に必要な機能を提供します。
ダッシュボード機能は、CKAN上で公開されているオープンデータを地図上で簡単に表示し視覚化するための機能を提供します。
本odpkg-dockerは、上記のパッケージに必要な複数のツールを[docker](https://www.docker.com/)を使い提供します。

### インストール

#### 事前準備

1. 実行環境
本オープンデータカタログサイト パッケージ（以下本パッケージ）の構築で推奨される実行関環境は以下の通りです。

| 項目 | 内容 |
|:---:|:---:|
| OS   | CentOS 7.3 |
| CPU  | 4コア |
|メモリ | 4Gバイト |
| HDD | 100Gバイト |

1. 事前準備
新しく本パッケージを構築する場合、以下を準備します。
- サイト公開用ドメイン
- ドメインに対するSSL証明書
- Google Maps APIキー
また、以下を準備することで、CKAN内のデータに対するアクセス数の取得が可能となります。
- Google Analytics トラッキングID
その他、管理用のメール送信のために以下を使用します。
- SMTPメールサーバ

1. サイト公開用ドメイン
サイト公開用ドメインは、本パッケージで用いるckan, wordpress, ダッシュボードのそれぞれに対して必要となっています。
以降の手順では、以下のドメインを用いることとして記載しています。

| 機能名 | ドメイン名（例） |
|:---:|:---:|
| ckan | data-odpkg.example.co.jp |
| wordpress | www-odpkg.example.co.jp |
| ダッシュボード | map-odpkg.exaple.co.jp |

1. ドメインに対するSSL証明書

本パッケージは、httpsで公開するため、前述のドメインに対して、SSL証明書を用います。SSL証明書ファイル、および、keyファイルを本パッケージのウエブサーバとして利用するNginxに対応し、以下の形式で用意します。

- pem
- key

SSL証明書のファイルは、本パッケージのckan、wordpress、ダッシュボードの各機能に対して用意します。SSL証明書ファイル、および、keyファイルは以下のファイル名で用意します。

| 機能名 | pemnのファイル名 | keyのファイル名 |
|:---:|:---:|:---:|
| ckan | data.pem | data.key |
| wordpress | www.pem | www.key |
| ダッシュボード | map.pem | map.key |

SSL証明書ファイルは、サーバー証明書と中間証明書をマージしたファイルを使用します。サーバー証明書ファイルと中間証明書ファイルを、linuxのcatコマンドなどで、1つのファイルとしてマージしたSSL証明書ファイルを用意します。

1. Google AnalyticsトラッキングIDの取得

1. Google Maps APIキーの取得

1. SMTPメールサーバ

#### パッケージの構築

### 参考
